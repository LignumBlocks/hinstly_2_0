<div class="relative">
  <!-- Trigger -->
  <button
    type="button"
    id="<%= dropdown_button_id %>"
    class="w-full flex justify-between items-center bg-gray-50 border border-gray-300 text-gray-700 text-sm rounded focus:ring-blue-500 focus:border-blue-500 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
    onclick="toggleDropdown('<%= dropdown_menu_id %>')"
  >
    <%= label %>
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </button>

  <!-- Dropdown -->
  <div
    id="<%= dropdown_menu_id %>"
    class="absolute z-10 hidden bg-white border border-gray-300 rounded shadow-lg mt-2 w-full dark:bg-gray-700 dark:border-gray-600"
  >
    <ul class="p-2 space-y-2" onclick="event.stopPropagation()">
      <% collection.each do |item| %>
        <li class="flex items-center">
          <input
            type="checkbox"
            id="<%= "category-#{item.id}" %>"
            name="<%= filter_name %>"
            value="<%= item.id %>"
            class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer"
            <%= 'checked' if selected_items&.include?(item.id.to_s) %>
          >
          <label for="<%= "#{field_prefix}_#{item.id}" %>" class="ml-2 text-sm text-gray-700 dark:text-gray-300 cursor-pointer">
            <%= item.name %>
          </label>
        </li>
      <% end %>
    </ul>
  </div>
</div>
